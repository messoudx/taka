<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>فعاليات الأصدقاء</title>

  <!-- خطوط عصرية -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Landing (login) -->
  <main class="wrap center-card" id="landing">
    <div class="card landing-card" role="form" aria-labelledby="appTitle">
      <h1 id="appTitle">فعاليات الأصدقاء</h1>

      <label class="label">اسم مستعار</label>
      <input id="nickInput" placeholder="اكتب اسمك المستعار" autocomplete="off" />

      <label class="label" style="margin-top:10px">أدخل كود الدخول (سيُزوّد من المدير)</label>
      <input id="userCodeInput" placeholder="أدخل كود الدخول هنا" autocomplete="off" />

      <div style="display:flex;gap:8px;margin-top:14px;flex-wrap:wrap">
        <button id="loginBtn" class="btn primary" style="flex:1">دخول</button>
        <button id="clearLocal" class="btn" title="مسح بيانات جهازك" style="flex:1">مسح البيانات</button>
      </div>

      <p class="muted small" style="margin-top:12px">ملاحظة: الكود يجب أن يكون مُسجّلًا مسبقًا من قِبلك. لا تشارك كودك علنًا.</p>
    </div>
  </main>

  <!-- Games / Lobby (hidden until login) -->
  <main class="wrap" id="gamesPage" style="display:none">
    <header class="games-header">
      <div>
        <div class="meBox" id="meBox"></div>
        <div class="muted small">ادخل إلى غرفة أو أنشئ واحدة للعب مع أصدقائك</div>
      </div>

      <div class="roomControls">
        <input id="roomInput" placeholder="أدخل رمز الغرفة" />
        <button id="createRoomBtn" class="btn">إنشاء</button>
        <button id="joinRoomBtn" class="btn primary">انضم</button>
      </div>
    </header>

    <section class="content">
      <aside class="leftCol">
        <div class="card">
          <strong>اللاعبون في الغرفة</strong>
          <div id="playersList" style="margin-top:8px">لم تنضم إلى غرفة بعد</div>
        </div>

        <div class="card" style="margin-top:12px">
          <strong>الألعاب</strong>
          <div style="display:grid;gap:8px;margin-top:8px">
            <button class="btn game-request primary" data-game="board" onclick="requestGame('board')">اطلب: لوحة الأسئلة (فرق)</button>
            <button class="btn game-request" data-game="xo" onclick="requestGame('xo')">اطلب: XO (1v1)</button>
            <button class="btn game-request" data-game="letters" onclick="requestGame('letters')">اطلب: تحدي الحروف</button>
          </div>
        </div>
      </aside>

      <main class="mainCol">
        <div class="card">
          <strong>الدردشة داخل الغرفة</strong>
          <div id="chatBox" class="chatBox"></div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="chatInput" placeholder="اكتب رسالة..." />
            <button id="sendChat" class="btn primary">أرسل</button>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <strong>الطلبات / الإشعارات</strong>
          <div id="requestsBox" style="margin-top:8px">لا توجد طلبات</div>
        </div>
      </main>
    </section>

    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button id="leaveRoomBtn" class="btn">مغادرة الغرفة</button>
      <button id="logoutBtn" class="btn">تسجيل خروج</button>
    </div>
  </main>

  <!-- Simple modal placeholders (will be opened when session starts) -->
  <div id="xoModal" class="modal" aria-hidden="true">
    <div class="modalCard">
      <h3>XO — بدء المباراة</h3>
      <div id="xoArea">جارٍ فتح اللعبة...</div>
      <div style="margin-top:12px"><button class="btn" onclick="closeXOModal()">إغلاق</button></div>
    </div>
  </div>

  <div id="lettersModal" class="modal" aria-hidden="true">
    <div class="modalCard">
      <h3>تحدي الحروف — بدء المباراة</h3>
      <div id="lettersArea">جارٍ فتح اللعبة...</div>
      <div style="margin-top:12px"><button class="btn" onclick="closeLettersModal()">إغلاق</button></div>
    </div>
  </div>

  <div id="boardModal" class="modal" aria-hidden="true">
    <div class="modalCard">
      <h3>لوحة الأسئلة — بدء الجلسة</h3>
      <div id="boardArea">جارٍ فتح اللعبة...</div>
      <div style="margin-top:12px"><button class="btn" onclick="closeBoardModal()">إغلاق</button></div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script src="app.js"></script>
</body>
</html>
