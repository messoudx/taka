<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>فعاليات الأصدقاء — دخول</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="wrap" id="landing">
    <header>
      <div class="title">فعاليات الأصدقاء — ادخل للغرفة</div>
    </header>

    <section class="card">
      <label>الاسم المستعار</label>
      <input id="nickInput" placeholder="اكتب اسمك المستعار" />

      <label style="margin-top:8px">رمز المستخدم (خاص بك)</label>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="userCodeInput" readonly />
        <button id="regenCode" class="btn">تجديد</button>
      </div>

      <label style="margin-top:8px">رمز الغرفة</label>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="roomInput" placeholder="مثال: room123" />
        <button id="createRoomBtn" class="btn">إنشاء</button>
        <button id="joinRoomBtn" class="btn primary">انضم</button>
      </div>

      <small class="small" style="display:block;margin-top:10px">بعد الانضمام ستنتقل تلقائياً إلى صفحة الألعاب، وسيُحفظ رمز المستخدم باسم قابل للمشاركة.</small>
    </section>

    <footer style="margin-top:12px;font-size:12px;color:#666">مُدعوم بـ Firebase Realtime Database — تأكد من وضع firebaseConfig في الملف app.js</footer>
  </main>

  <!-- صفحة الألعاب (تظهر بعد الانضمام) -->
  <main class="wrap" id="gamesPage" style="display:none">
    <header>
      <div class="title">العب الآن</div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="teamBox" style="min-width:200px">
          <div style="font-weight:800;margin-bottom:6px">أنت</div>
          <div id="meBox"></div>
        </div>
        <div class="teamBox" style="min-width:200px">
          <div style="font-weight:800;margin-bottom:6px">الغرفة</div>
          <div id="roomBox"></div>
        </div>
      </div>
    </header>

    <div class="headerRow">
      <div class="small">الحالة: <span id="connStatus">غير متصل</span></div>
      <div class="small">اللاعبون في الغرفة:</div>
    </div>

    <div style="display:flex;gap:12px;align-items:flex-start;margin-top:12px">
      <div style="flex:1">
        <div class="leaderboard" id="playersList">لا أحد</div>

        <!-- إدارة أسماء الفرق -->
        <div style="display:flex;gap:8px;margin-top:12px;align-items:center">
          <div style="flex:1">
            <label>اسم الفريق الأول</label>
            <input id="team1NameInput" placeholder="مثال: الفريق البرتقالي" />
          </div>
          <div style="flex:1">
            <label>اسم الفريق الثاني</label>
            <input id="team2NameInput" placeholder="مثال: الفريق الأزرق" />
          </div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <button id="saveTeamsBtn" class="btn primary">حفظ الأسماء</button>
            <button id="claimTeam1Btn" class="btn">انضم كـ فريق1</button>
            <button id="claimTeam2Btn" class="btn">انضم كـ فريق2</button>
          </div>
        </div>

        <h4 style="margin-top:12px">الألعاب</h4>
        <div class="gamesGrid" id="gamesGrid">
          <div class="gameCard">
            <h4>لوحة الأسئلة (فرق)</h4>
            <p class="small">أسئلة تُمنح نقاطًا للفريق الذي يختاره المُدرّج.</p>
            <div style="display:flex;gap:8px"><button class="btn primary" data-game="board" onclick="requestGame('board')">اطلب اللعب</button></div>
          </div>

          <div class="gameCard">
            <h4>XO (1 ضد 1)</h4>
            <p class="small">تيك-تاك-تو بين لاعبين — ادعِ لاعبًا أو اطلب خصمًا.</p>
            <div style="display:flex;gap:8px"><button class="btn primary" data-game="xo" onclick="requestGame('xo')">اطلب لعب XO</button></div>
          </div>

          <div class="gameCard">
            <h4>تحدي الحروف (فريق أو 1v1)</h4>
            <p class="small">شبكة 5×5. اختيارك ليكون كلاعب فردي أو انضمام كفريق.</p>
            <div style="display:flex;gap:8px"><button class="btn primary" data-game="letters" onclick="requestGame('letters')">اطلب التحدي</button></div>
          </div>
        </div>
      </div>

      <aside style="width:320px">
        <div class="card" style="padding:10px">
          <strong>الدردشة داخل الغرفة</strong>
          <div id="chatBox" style="height:260px;overflow:auto;border:1px solid #f1f1f1;padding:8px;margin-top:8px;background:#fff;border-radius:8px"></div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="chatInput" placeholder="اكتب رسالة..." style="flex:1" />
            <button id="sendChat" class="btn primary">أرسل</button>
          </div>
        </div>

        <div class="card" style="margin-top:8px;padding:10px">
          <strong>الإشعارات / الطلبات</strong>
          <div id="requestsBox" style="min-height:120px;margin-top:8px"></div>
        </div>

      </aside>
    </div>

    <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
      <button id="leaveRoomBtn" class="btn">مغادرة الغرفة</button>
      <button id="backToLanding" class="btn">العودة</button>
    </div>
  </main>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="app.js"></script>
</body>
</html>
